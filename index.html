<!Doctype html>
<html>
    <head>
    </head>
    <body>
        <canvas width="1024" height="512" style="border: 3px solid black"></canvas>
        <div id="debugMenu"></div>
        <script>
            const ctx = document.querySelector("canvas").getContext("2d");
            var power = 0;
            var held = false;
            var right = false;
            var left = false;
            var rele = false;
            var beeblyboobly = 0;
            var gobbledyguck = 20;
            var poopl = 5;
            var inie = 200;
            var tapel = 1;
            var debug = 0;
            var life = 3;
            var code = 0;
            var dink = 0;
            var jlio = 100;
            var klio = 0;
            var score = 0;
            var score2 = 0;
            var score3 = 0;
            var jjj = false;
            var hhh = 10;
            var jhj = 1;
            var dd = document.createElement("img");
            dd.src = "death.png"
            var iop = document.createElement("img");
            iop.src = "life.png";
            var gusIsAnOp = document.createElement("img");
            gusIsAnOp.src = "score pic.png";
            var zerop = document.createElement("img");
            zerop.src = "zero.png";
            var gop = document.createElement("img");
            gop.src = "one.png";
            var thop = document.createElement("img");
            thop.src = "two.png";
            var jop = document.createElement("img");
            jop.src = "three.png";
            var four = document.createElement("img");
            four.src = "four.png";
            var five = document.createElement("img");
            five.src = "five.png";
            var six = document.createElement("img");
            six.src = "six.png";
            var seven = document.createElement("img");
            seven.src = "seven.png";
            var eight = document.createElement("img");
            eight.src = "eight.png";
            var nine = document.createElement("img");
            nine.src = "nine.png";
            var oup = document.createElement("img");
            oup.src = "squiggles.png";
            var loopho = 1000;
            var collision = function(o1,o2){
                if(o1.position.x + o1.width > o2.position.x && o1.position.x < o2.position.x + o2.width && o1.position.y + o1.height > o2.position.y && o1.position.y < o2.position.y + o2.height){
                    return true;
                }
            }
            class squig{
                constructor(x){
                    this.x = x;
                    this.y = 0;
                    this.frm = 1;
                    this.frms = 2;
                    this.r = 5;
                    this.img = document.createElement("img");
                    this.img.src = "squiggles.png";
                    this.hitbox = {
                        position:{
                            x: this.x,
                            y: this.y,
                        },
                        width: 32,
                        height: 32,
                    };
                }
                update(ctx){
                    this.hitbox = {
                        position:{
                            x: this.x,
                            y: this.y,
                        },
                        width: 32,
                        height: 32,
                    };
                    if(collision(poo.hitbox,this.hitbox) && inie == 0 && poo.state != 4){
                        life -= 1;
                        if(life > 0){
                            inie = 200;
                        }
                    }
                    if(this.r == 0){
                        if(this.frm < this.frms){
                            this.frm += 1;
                        }
                        else{
                            this.frm = 1;
                        }
                        this.r = 10;
                    }
                    this.r -= 1;
                    this.y += 2;
                    ctx.drawImage(this.img,-32 + (this.frm * 32),0,32,32,this.x,this.y,32,32);
                }
            }
            class enemy{
                constructor(x,dir){
                    this.x = x;
                    this.y = 480;
                    this.frm = 1;
                    this.frms = 2;
                    this.r = 5;
                    this.dir = dir;
                    this.img = document.createElement("img");
                    this.img.src = "goober.png";
                    this.hitbox = {
                        position:{
                            x: this.x,
                            y: this.y,
                        },
                        width: 64,
                        height: 32,
                    };
                }
                update(ctx){
                    this.hitbox = {
                        position:{
                            x: this.x,
                            y: this.y,
                        },
                        width: 64,
                        height: 32,
                    };
                    if(this.x <= 0 || this.x >= 960){
                        this.dir = -this.dir;
                    }
                    if(collision(poo.hitbox,this.hitbox) && poo.men > 0){
                        pog.splice(pog.indexOf(this),1);
                        poo.men = -5;
                        score += 1;
                    }
                    else if(collision(poo.hitbox,this.hitbox) && inie == 0 && poo.state != 4){
                        life -= 1;
                        if(life > 0){
                            inie = 200;
                        }
                    }
                    if(this.r == 0){
                        if(this.frm < this.frms){
                            this.frm += 1;
                        }
                        else{
                            this.frm = 1;
                        }
                        this.r = 20;
                    }
                    this.r -= 1;
                    this.x += this.dir;
                    ctx.drawImage(this.img,-64 + (this.frm * 64),0,64,32,this.x,this.y,64,32);
                }
            }
            class player{
                constructor(){
                    this.x = 512;
                    this.y = 448;
                    this.rate = 10;
                    this.r = 0;
                    this.frame = 1;
                    this.state = 1;
                    this.frames = 2;
                    this.img = document.createElement("img");
                    this.men = 0;
                    this.air = false;
                    this.xmen = 0;
                    this.hhh = 10;
                    this.ghg = 1;
                    this.hitbox = {
                        position:{
                            x: this.x,
                            y: this.y,
                        },
                        width: 64,
                        height: 64,
                    };
                }
                update(ctx){
                    this.hitbox = {
                        position:{
                            x: this.x,
                            y: this.y,
                        },
                        width: 64,
                        height: 64,
                    };
                    if(this.x <= 0 && this.xmen < 0){
                        this.xmen = -this.xmen;
                    }
                    if(this.x >= 960 && this.xmen > 0){
                        this.xmen = -this.xmen;
                    }
                    if(this.y >= 448 && this.men > 0){
                        this.y = 448;
                        this.men = 0;
                        this.air = false;
                        this.xmen = 0;
                    }
                    if(this.y < 448){
                        if(this.men < 15){
                            this.men += 0.2;
                        }
                        this.air = true;
                        this.r = 10;

                    }
                    if(this.men < 0){
                        this.state = 2;
                    }
                    else if(this.men >= 0 && this.air){
                        this.state = 3;
                        this.frame = 1;
                    }
                    else{
                        this.state = 1;
                        
                    }
                    this.y += this.men;
                    this.x += this.xmen;
                    if(rele && !this.air){
                        this.state = 2;
                        this.men = -power;
                        if(left){
                            this.xmen = -(power / 3);
                        }
                        else if(right){
                            this.xmen = power / 3;
                        }
                        power = 0;
                        rele = false;
                    }
                    if(held && !this.air){
                        this.state = 3;
                        if(power < 10){
                            power += 0.3;
                        }
                    }
                    if(this.r == 0){
                        this.r = this.rate;
                    if(this.state == 1){
                        if(this.frame == 1){
                            this.frame = 2;
                        }
                        else{
                            this.frame = 1;
                        }
                        this.img.src = "squobe idle.png";
                    }
                    }
                    if(this.state == 1){
                        this.img.src = "squobe idle.png";
                    }
                    if(this.state == 2){
                        this.frame = 1;
                        this.img.src = "squobe jump.png";
                    }
                    if(this.state == 3){
                        this.frame = 1;
                        this.img.src = "squobe j.png";
                    }
                    if(inie > 0 ){
                        inie -= 1;
                        poopl -= 1;
                        if(poopl == 0){
                            
                            if(tapel == 1){
                                tapel = 0;
                                poopl = 10;
                                
                            }
                            else{
                                tapel = 1;
                                poopl = 10;
                            }
                        }
                        if(tapel == 1){
                            ctx.drawImage(this.img,-64 + (this.frame * 64),0,64,64,this.x,this.y,64,64);
                        }
                        else{

                        }
                    }
                    else{
                    ctx.drawImage(this.img,-64 + (this.frame * 64),0,64,64,this.x,this.y,64,64);
                    }
                    this.r -= 1;
                }
            }
            var poo = new player();
            var pog = [new enemy(1,2)];
            var polot = [new squig(100)];
            setInterval(
                function(){
                    ctx.fillStyle = "#ffffff";
                    ctx.fillRect(0,0,5234959,2549234598);
                    loopho -= 1;
                    if(loopho == 0){
                        loopho = Math.floor(Math.random() * 1000) + 1;
                        dink = Math.floor(Math.random() * 2);
                        if(dink == 0){
                            pog.push(new enemy(959,-2));
                        }
                        if(dink == 1){
                            pog.push(new enemy(1,2));
                        }
                    }
                    jlio -= 1;
                    if(jlio == 0){
                        jlio = Math.floor(Math.random() * 400) + 1;
                        klio = Math.floor(Math.random() * 1024);
                        polot.push(new squig(klio));
                    }
                    gobbledyguck -= 1;
                    if(gobbledyguck == 0){
                        gobbledyguck = 10;
                        if(beeblyboobly == 0){
                            beeblyboobly = 1;
                        }
                        else{
                            beeblyboobly = 0;
                        }
                    }
                    
                    ctx.drawImage(iop,beeblyboobly * 64,0,64,32,0,0,64,32);
                    ctx.drawImage(gusIsAnOp,beeblyboobly * 96,0,96,32,0,32,96,32);
                    if(life == 3){
                        ctx.drawImage(jop,beeblyboobly * 32,0,32,32,70,0,32,32);
                    }
                                        if(life == 2){
                        ctx.drawImage(thop,beeblyboobly * 32,0,32,32,70,0,32,32);
                    }
                                        if(life == 1){
                        ctx.drawImage(gop,beeblyboobly * 32,0,32,32,70,0,32,32);
                    }
                    switch(score){
                            case 0:
                                ctx.drawImage(zerop,beeblyboobly * 32,0,32,32,160,32,32,32);
                                break;
                            case 1:
                                ctx.drawImage(gop,beeblyboobly * 32,0,32,32,160,32,32,32);
                                break;
                            case 2:
                                ctx.drawImage(thop,beeblyboobly * 32,0,32,32,160,32,32,32);
                                break;
                            case 3:
                                ctx.drawImage(jop,beeblyboobly * 32,0,32,32,160,32,32,32);
                                break;
                            case 4:
                                ctx.drawImage(four,beeblyboobly * 32,0,32,32,160,32,32,32);
                                break;
                            case 5:
                                ctx.drawImage(five,beeblyboobly * 32,0,32,32,160,32,32,32);
                                break;
                            case 6:
                                ctx.drawImage(six,beeblyboobly * 32,0,32,32,160,32,32,32);
                                break;
                            case 7:
                                ctx.drawImage(seven,beeblyboobly * 32,0,32,32,160,32,32,32);
                                break;
                            case 8:
                                ctx.drawImage(eight,beeblyboobly * 32,0,32,32,160,32,32,32);
                                break;
                            case 9:
                                ctx.drawImage(nine,beeblyboobly * 32,0,32,32,160,32,32,32);
                                break;
                            case 10:
                                score = 0;
                                score2 += 1;
                                break;
                    }
                    switch(score2){
                            case 0:
                                ctx.drawImage(zerop,beeblyboobly * 32,0,32,32,128,32,32,32);
                                break;
                            case 1:
                                ctx.drawImage(gop,beeblyboobly * 32,0,32,32,128,32,32,32);
                                break;
                            case 2:
                                ctx.drawImage(thop,beeblyboobly * 32,0,32,32,128,32,32,32);
                                break;
                            case 3:
                                ctx.drawImage(jop,beeblyboobly * 32,0,32,32,128,32,32,32);
                                break;
                            case 4:
                                ctx.drawImage(four,beeblyboobly * 32,0,32,32,128,32,32,32);
                                break;
                            case 5:
                                ctx.drawImage(five,beeblyboobly * 32,0,32,32,128,32,32,32);
                                break;
                            case 6:
                                ctx.drawImage(six,beeblyboobly * 32,0,32,32,128,32,32,32);
                                break;
                            case 7:
                                ctx.drawImage(seven,beeblyboobly * 32,0,32,32,128,32,32,32);
                                break;
                            case 8:
                                ctx.drawImage(eight,beeblyboobly * 32,0,32,32,128,32,32,32);
                                break;
                            case 9:
                                ctx.drawImage(nine,beeblyboobly * 32,0,32,32,128,32,32,32);
                                break;
                            case 10:
                                score2 = 0;
                                score3 += 1;
                                break;
                    }
                    switch(score3){
                            case 0:
                                ctx.drawImage(zerop,beeblyboobly * 32,0,32,32,96,32,32,32);
                                break;
                            case 1:
                                ctx.drawImage(gop,beeblyboobly * 32,0,32,32,96,32,32,32);
                                break;
                            case 2:
                                ctx.drawImage(thop,beeblyboobly * 32,0,32,32,96,32,32,32);
                                break;
                            case 3:
                                ctx.drawImage(jop,beeblyboobly * 32,0,32,32,96,32,32,32);
                                break;
                            case 4:
                                ctx.drawImage(four,beeblyboobly * 32,0,32,32,96,32,32,32);
                                break;
                            case 5:
                                ctx.drawImage(five,beeblyboobly * 32,0,32,32,96,32,32,32);
                                break;
                            case 6:
                                ctx.drawImage(six,beeblyboobly * 32,0,32,32,96,32,32,32);
                                break;
                            case 7:
                                ctx.drawImage(seven,beeblyboobly * 32,0,32,32,96,32,32,32);
                                break;
                            case 8:
                                ctx.drawImage(eight,beeblyboobly * 32,0,32,32,96,32,32,32);
                                break;
                            case 9:
                                ctx.drawImage(nine,beeblyboobly * 32,0,32,32,96,32,32,32);
                                break;
                    }
                    if(life > 0){
                        poo.update(ctx);
                    }
                    else if(poo.y < 444){
                        poo.y += 10;
                    }
                    pog.forEach((e) => {e.update(ctx);});
                    polot.forEach((e) => {e.update(ctx);});
                    if(life < 1){
                        ctx.fillRect(0,0,3243453245,245245);
                        if(hhh == 0){
                            jhj += 1;
                            hhh = 5;
                        }
                        hhh -= 1;
                        ctx.drawImage(dd,jhj*64,0,64,64,poo.x,poo.y,64,64);
                    }

                }
            ,10)
            document.addEventListener("keydown",(e) => {
                if(e.key == " "){
                    held = true;
                }
                if(e.key == "a"){
                    left = true;
                }
                if(e.key == "d"){
                    right = true;
                }
            })
            document.addEventListener("keyup",(e) => {
                if(e.key == " "){
                    held = false;
                    rele = true;
                }
                if(e.key == "a"){
                    left = false;
                }
                if(e.key == "d"){
                    right = false;
                }
                if(e.key == "o"){
                    if(code == 0){
                        code += 1;
                    }
                    else{
                        code = 0;
                    }
                }
                if(e.key == "p"){
                    if(code == 1){
                        code += 1;
                    }
                    else{
                        code = 0;
                    }
                }
                if(e.key == "e"){
                    if(code == 2){
                        code += 1;
                    }
                    else{
                        code = 0;
                    }
                }
                if(e.key == "n"){
                    if(code == 3){
                        var iio = document.createElement("input");
                        document.body.appendChild(iio);
                    }
                    else{
                        code = 0;
                    }
                }
                if(e.key == "g"){
                    var iiio = document.querySelector("input");
                    if(iiio.value == "opensesame"){
                        debug = 1;
                    }
                }
            })
        </script>
    </body>
</html>